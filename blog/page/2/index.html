
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Marcin bloguje</title>
  <meta name="author" content="Marcin Cylke">

  
  <meta name="description" content="And now for part 2 of my visit to Geecon 2011! 1. Jim Webber &#8220;Revisiting SOA for the 21st century&#8221; Now this was awesome! Jim Webber, a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zygm0nt.github.com/blog/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Marcin bloguje" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-172194-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">mob</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Marcin bloguje</a></h1>
  
    <h2>.impressions.memos.tech.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:zygm0nt.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/05/22/geecon-2011-day-2/">Geecon 2011 - Day 2</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-05-22T18:39:31+02:00" pubdate data-updated="true">May 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>And now for part 2 of my visit to Geecon 2011!</p>
<EXCERPT>
<h2>1. <a href="http://jim.webber.name/">Jim Webber</a> &#8220;Revisiting SOA for the 21st
century&#8221;</h2>

<p>Now this was awesome! Jim Webber, a former <a
href="http://www.thoughtworks.com/">ThoughtWorks</a> employee, now
Neo4j evangelist (in <a href="http://neotechnology.com/">Neotechnology</a>) described his views
on how SOA should look - according to him. This was presented
previously, on other occasions as his &#8220;Guerilla SOA&#8221; talk - generally he
advocated for REST based services, loose contracts (stating that WSDLs
are too verbose and code generation is evil).</p>

<p>Jim mentioned Martin Fowler&#8217;s article on integration databases but I
couldn&#8217;t find it anywhere - thou the topic looks interesting. He also
recommended <a
href="http://en.wikipedia.org/wiki/Behavior_Driven_Development">BDD</a> and exposing tests on the web for the end
user to use them as early as possible.</p>

<p> One big point he made his case with was <b>not relying on enterprise
software</b>. Simple tools can do much better job. He compared
implementing Web Services security (Secured SOAP over HTTP over TCP IP)
to REST based service accessed through <i>HTTPS</i> - basic and easily
testable with tools like <a href="http://curl.haxx.se/">curl</a>.</p>

<p>Great talk. One of the best!</p>

<h2>2. <a href="http://blog.staffannoteberg.com/">Staffan Noteberg</a> &#8220;Regex - the future
programming&#8221;</h2>

<p>I must confess, that this did not go too well. The whole talk was
well prepared and laid out but it lacked depth. It was pretty basic
introduction to regex. From the presentation&#8217;s subject I was rather
prepared for some novel uses of regex - like for example: showing how to
filter big volume of data with simple regex or sth.</p>

<p>But the talk was fun, Staffan is a good speaker. He is also an author
of <a href="http://www.pomodorotechnique.com/"> pomodoro technique</a> book - I intend to read sth abut
this technique and this may be a nice start</p>

<h2>3. Bartosz Kowalewski &#8220;Is OSGI ready for wide
adoption?&#8221;</h2>

<p>If it comes to titles I tend to rely on them pretty heavily, however
strange it may seem. This time I also did - and the whole talk did not
give me a definitive answer to the stated question.</p>

<p>Sure, the presentation was informative, but it described some OSGI
specific, quite low level stuff. Of course, if you want to use OSGI -
even by leveraging application server with OSGI under the hood - you
should know a fair bit about the technology itself. Even thou the AS
does a good job of hiding OSGI container specifics from the developer,
in case of problems it&#8217;s better to be well informed. All in all - the
talk gave too little information for me.</p>

<h2>4. <a href="http://www.jetbrains.com/company/people/Pech_Vaclav.html">Vaclav Pech</a> &#8220;Pick low hanging fruit&#8221;</h2>

<p><b>&#8220;Parallelism is not hard, multithreading is&#8221;</b> - this was the
key sentence of the presentation. The speaker showed how to introduce
concurrency into normal java/groovy code by sprinkling it with
concurrency powder. Easy enough! With <a
href="http://gpars.codehaus.org/">GPars</a> library he
showed:</p>

<ul>
<li>running processing tasks with thread pools</li>
<li>testing concurrent code</li>
<li>Fork/join Thread Pool - multiple thread queues (note to self:
fork/join is good for hierarchical problems)</li>
<li>low-hanging fruits:<br>

    <ul>
    <li>async calculations</li>
    <li>fork/join</li>
    <li>dataflow</li>
    <li>parallel collection processing</li>
    </ul>
</li>
<li>Actors are great - use <a
href="http://gpars.codehaus.org/">GPars</a> or <a href="http://akka.io/">Akka</a>,
is sufficient to use <i>@ActiveMethod</i> and <i>@ActiveObject</i>
annotations and Actors are usable in OO-world</li>
</ul>
</p>

<p> Good talk, well received!</p>

<h2>5. <a href="http://www.linkedin.com/in/antonarhipov">Anton Arhipov</a> &#8220;Bytecode for discriminating
developers&#8221;</h2>

<p>Technical introduction to the world of bytecode, jvm specification
details. I&#8217;ve drifted away to some other topics - really - can&#8217;t recall
what this was all about.</p>

<h2>6. <a href="http://jroller.com/aalmiray/">Andreas Almiray</a> &#8220;Polyglot Programming&#8221;</h2>

<p>This was a nice talk covering Groovy, Scala and Closure. The whole
point of it was to show how cool it is to play with emerging JVM
languages. They are not only fun but also useful. What&#8217;s more, they
bring freshness to java world, injecting it with some new paradigms and
methodologies. It is easier to incorporate new ideas into younger JVM
languages than to the mature Java.</p>

<h2>7. <a href="http://jim.webber.name/">Jim Webber</a> &#8220;A pragmatic introduction to
Neo4j&#8221;</h2>

<p>And Jim Webber again, this time with some <a href="http://neo4j.org/">Neo4j</a> evangelism. First
came some taxonomy information on NoSQL databases (Not Only SQL) as a
whole - than some specific examples of problems solvable with graph
databases - and Neo4j is a graph database. </p>

<p> Main points of Jim&#8217;s talk were:
<ul>
<li>sharding a database is important for scalability</li>
<li>series data - should be OK to use Neo4j as their storage</li>
</ul>

<h2>Conclusion</h2>

<p>These were all the sessions I attended. On Saturday there was a
Hacker-garden, but neither I had time nor will to stay - the topics were
very interesting and I&#8217;d definitely like to experience such an event,
but after 2 days of continuous talks I was rather tired.</p>

<p>To sum up, 2011&#8217;s Geecon was a great experience, with lots of
interesting talks and lots of new inspirations. Keep up the good work
guys!</p></div>
<h2>Comments</h2>
<div class='comments'>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/05/19/geecon-2011-day-1/">Geecon 2011 - Day 1</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-05-19T22:05:05+02:00" pubdate data-updated="true">May 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>Last week&#8217;s Java conference - <a href="http://2011.geecon.org">Geecon</a> was very
interesting. It was well prepared, and gave an insight into the current
Java related trends - concurrency, DSLs, polyglot programming. But not
only that - there were also some pretty different talks from excellent
speakers.</p>

<p>
The whole event took 4 days:
</p>

<ul>
<li>University day (wednesday)</li>
<li>2 regular conference days (Thursday + Friday) </li>
<li>hacker garden (Sunday)</li>
</ul>

<p>
I decided to attend only on Thursday and Friday - no time for more. Here
is what interesting happened during those days.
</p>

<EXCERPT>

<h1>Day 1</h2>

<p>The morning got me unprepared. After hard enough, after work travel to
Krakow on Wednesday, I wasn&#8217;t in the best shape. However after arriving
at the venue, being greeted with breakfast and refreshments I
looked at the rest of the day with real hope.</p>

<p>Since the schedule was tight - three parallel tracks of lecture, I
had to choose, so bare in mind, that is my account of what I&#8217;ve seen and
heard. Others may, of course, differ.</p>

<h2>1. <a href="http://blogs.oracle.com/dannycoward/">Danny Coward</a> &#8220;Java SE: The Road Ahead&#8221;</h2>

<p>Danny, being on <a href="http://www.oracle.com">Oracle</a> (considering being also former
Sun&#8217;s employee a plus) payroll, gave an insightful talk on new things to
came in <a
href="http://blogs.oracle.com/dannycoward/entry/channeling_java_se_7">Java 7</a>. He drew rather serious plans for Java 8.
According to Danny, the main trends in today&#8217;s Java ecosystem are:</p>

<ul>
<li>parallel programming</li>
<li>language dynamics</li>
</ul>

<p>and he probably is right :) The great things to come with new
versions of Java are:</p>

<ul>
<li>closures in Java (finally!)</li>
<li>extending interfaces</li>
<li>map, filter - functions for collections</li>
<li>lambda expressions - thou in Java 8</li>
</ul>
<p>The talk itself was a nice keynote, but I doubt the road map for Java
will be met in its full extent - the goals aren&#8217;t that small.</p>

<h2>2. <a href="http://www.springsource.com/people/jhoeller">Juergen Hoeller</a> &#8220;Enterprise Java in 2011&#8221;</h2>

<p><a href="http://www.springsource.com/">Spring Source</a> as one of the sponsors sent Juergen to
evangelize about the world of enterprise and Java&#8217;s place in it :) He
emphasized different kinds of deployment: WAR, cloud deployment - and
the latter&#8217;s rise of importance.</p>

<p>He pointed out how outdated current application servers are - the
usually lag ~3 years behind the main trends and developers&#8217; needs - good
point! He proposed looking under the hood of now-popular cloud
environments: <a href="http://code.google.com/appengine/">Google App
Engine</a> or <a href="http://aws.amazon.com/ec2/">Amazon
Elastic Cloud</a> to look for schemas in them, etc - I intend to listen
to his advice.</p>

<p>All in all this guy gave a great talk covering wide spectrum of
technologies and not focusing on technical stuff too much.</p>

<h2>3. <a href="http://www.javaspecialists.eu/contact.jsp">Heinz Kabutz</a> &#8220;Reflection madness&#8221;</h2>

<p>Despite living on a Greek island, this guy showed also how to whack
ones mind with <a
href="http://download.oracle.com/javase/tutorial/reflect/">Java Reflection API</a>. Pure magic! Some
highlights of his talk were:</p>
<ul>
<li>how to get <i>42 + 1 = 44</i></li>
<li>get the size of an object</li>
<li>get method caller&#8217;s id</li>
<li>add enum values dynamically</li>
</ul>

<p>With all this examples he pointed that using <i>SecurityManager</i>
will prevent such nasty coding practices.</p>

<p>Since he is an editor of <a
href="http://www.javaspecialists.eu/">Javaspecialists.eu</a>
newsletter, all the answers to problems presented in his talk (and many
many more) can be found there. </p>
<p>Well done, not to useful for me, nevertheless - interesting.</p>

<h2>4. <a href="https://twitter.com/#!/mfiguiere">Michael Figuiere</a>,
Cyrille Le Clere
&#8220;NoSQL & Datagrid from developer perspective&#8221;</h2>
<p>I don&#8217;t know what to think of this talk. It consisted an introduction
to NoSQL databases but also a bit of problem&#8217;s description that can be
encountered when dealing with them. Notable thoughts were on:</p>

<ul>
<li>creating a sharding ready data structure</li>
<li>denormalization as a useful process for NoSQL DBs</li>
<li>NoSQL usually means <b>no transactions</b></li>
</ul>

<h2>5. <A href="http://hamletdarcy.blogspot.com/">Hamlet D&#8217;Arcy</a> &#8220;New Ideas for old code&#8221;</h2>

<p>Since a lot of developers (all?) have to deal with legacy code - one
way or another, this talk was <i>a must</i>!</p>. The speaker shared
some ideas on how to work with such code and remain sane. The talk was
vivid, interesting and entertaining, well, and the notable thought? Here
they are:</p>

<ul>
<li>51% rule - if you&#8217;re not committing 51% of your time/your tasks into
fixing your situation than the whole battle <b>is already lost</b>,</li>
<li>read some good stuff!:<br/>
    <ul>
        <li><a
href="http://www.amazon.com/Refactoring-Improving-Design-Existing-Code/dp/0201485672">Martin Fowler&#8217;s &#8220;Refactoring&#8221;</a></li>
        <li><a
href="http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882/ref=sr_1_1?s=books&ie=UTF8&qid=1305828015&sr=1-1">George C. Martin &#8220;Clean Code&#8221;</a></li>
        <li><a href="http://chadfowler.com/2006/12/27/the-big-rewrite">Chad Fowler &#8220;Big Rewrites&#8221;</a> - and why they
failed, what&#8217;s wrong with them</li>
    </ul>
</li>
<li>use static analysis - <a href="http://findbugs.sourceforge.net/">Find Bugz</a>, 
pmc</li>
<li><a href="http://en.wikipedia.org/wiki/Command-query_separation">query-command</a> - a method should be a query or a
command:<br/>
    <ul>
        <li>query - returns sth</li>
        <li>command - change the state of an object</li>
    </ul>
</li>
<li>he also proposed <b>scratch refactoring</b><br/>
    <ol>
        <li>set a timer</li>
        <li>tag your code</li>
        <li><b>refactor without tests</b></li>
        <li>step back and analyze</li>
        <li>is it better? if not, revert</li>
    </ol>
</li></ul>

<p>This was nice! - it assumed arriving at a project with no ( or
little) tests.</p>

<h2>6. Aslan Knutsen &#8220;Arquillian&#8221;</a></h2>

<p>The last talk of that day was about some new library from JBoss that
would allow to test your components with unit tests - test them in a
destination container. The whole point of this library is to run the
specific fragment of code as if it was build and deployed to some
application server (let&#8217;s say JBoss AS ;-) ). To be honest, I can&#8217;t find
much application for that - thou I&#8217;m not doing any serious work in JEE
world.</p>

<h2>Party</h2>

<p>And the day ended. But there was sth else to do after the official
part - party time! It took place at <a href="">Klub Pauza</a> on
Floriańska street. It was a rather nice social event.</p>


<p><i>&#8230; to be continued - stay tuned for part 2</i></p></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'><a href="http://blog.patryk-dobrowolski.eu">JedenPies</a></div>
<div class='content'>
<p>&quot;how to get 42 + 1 = 44&quot;?<br />
Tutaj ;)<br />
http://blog.patryk-dobrowolski.eu/2011/05/16/refleksja-moze-byc-niebezpieczna-zobacz-jak-zniszczyc-sobie/</p></div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/05/02/jce-keystore-and-untrusted-sites/">JCE Keystore and Untrusted Sites</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-05-02T17:03:38+02:00" pubdate data-updated="true">May 2<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>Recently at work I was in need of connecting to a web service exposed via
HTTPS. I&#8217;ve been doing this from inside <a href="http://servicemix.apache.org/home.html">Servicemix 3.3.1</a>, which may seem
a bit inhibiting, but that was a requirement. Nevertheless I&#8217;ve been
trying my luck with the included <em>servicemix-http-2008.01</em>
component. I&#8217;ve created a simple <a
href="http://servicemix.apache.org/working-with-service-units.html">Service
Unit</a> using that component and made connection attempt.
Unfortunately I&#8217;ve encountered issues with the SSL conversation
negotiation. I had to dig deeper into the <em>servicemix-http</em> code
to find out these had something to do with my <a
href="https://secure.wikimedia.org/wikipedia/en/wiki/Java_Cryptography_Extension">JCE</a>
keystore. Read more to find out what happened!</p>
<EXCERPT>
<p>Ok, so I had my <em>xbean.xml</em> for http component looking like
this:</p>

<div><script src='https://gist.github.com/951474.js?file=servicemix-http-xbean.xml'></script>
<noscript><pre><code>&lt;beans xmlns:http=&quot;http://servicemix.apache.org/http/1.0&quot;
       xmlns:my=&quot;http://example.pl/abc&quot;&gt;

                &lt;http:endpoint
                          endpoint=&quot;default&quot;
                          locationURI=&quot;https://abc.host.pl&quot;
                          role=&quot;provider&quot;
                          service=&quot;my:service-1&quot;
                          soap=&quot;true&quot;
                          soapVersion=&quot;1.1&quot;&gt;
                    &lt;http:ssl&gt;
                             &lt;http:sslParameters
                                         keyStore=&quot;classpath:keystore.jks&quot;
                                         keyStorePassword=&quot;servicemix&quot;/&gt;
                    &lt;/http:ssl&gt;
                &lt;/http:endpoint&gt;            
&lt;/beans&gt;</code></pre></noscript></div>



<p>As you can see this is a proxy adapter to some outside service
exposed via secured HTTP protocol. Since it&#8217;s <em>HTTPS</em> I&#8217;ve
specified some SSL parameters. It was sufficient in my case to just pass
the keystore file and it&#8217;s password.</p>

<p>I&#8217;ve created my <em>keystore.jks</em> file in <em>smx_home/conf</em>
with password <em>servicemix</em> in the following manner:</p>

<div><script src='https://gist.github.com/951459.js?file=create_keystore.sh'></script>
<noscript><pre><code>keytool -genkey -alias alias -keyalg RSA -keysize 1024 -dname &quot;CN=Marcin Cylke, OU=Java Security, O=ABC, c=PL&quot; -keypass secret_pass -storepass secret_pass -KeyStore /tmp/new</code></pre></noscript></div>


<p>You can see what&#8217;s in this file with this command:</p>

<div><script src='https://gist.github.com/951459.js?file=list_keys.sh'></script>
<noscript><pre><code>keytool -list -v -KeyStore keystore.jks</code></pre></noscript></div>


<p>At this point I thought, that having a configured keystore and my
component would suffice. Wrong! As soon as I&#8217;ve tried to connect to the
external service I got an exception:</p>

<div><script src='https://gist.github.com/951458.js?file=untrusted_key_error.java'></script>
<noscript><pre><code>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1623)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:198)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:192)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1074)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:128)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:529)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:465)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1120)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:623)
    at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)
    at org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:502)
    at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:993)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:397)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:170)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:346)
    at org.apache.servicemix.http.processors.ProviderProcessor.process(ProviderProcessor.java:167)
    at org.apache.servicemix.soap.SoapEndpoint.process(SoapEndpoint.java:368)
    at org.apache.servicemix.common.AsyncBaseLifeCycle.doProcess(AsyncBaseLifeCycle.java:600)
    at org.apache.servicemix.common.AsyncBaseLifeCycle.processExchange(AsyncBaseLifeCycle.java:554)
    at org.apache.servicemix.common.AsyncBaseLifeCycle.onMessageExchange(AsyncBaseLifeCycle.java:510)
    at org.apache.servicemix.common.SyncLifeCycleWrapper.onMessageExchange(SyncLifeCycleWrapper.java:60)
    at org.apache.servicemix.jbi.messaging.DeliveryChannelImpl.processInBound(DeliveryChannelImpl.java:620)
    at org.apache.servicemix.jbi.nmr.flow.AbstractFlow.doRouting(AbstractFlow.java:172)
    at org.apache.servicemix.jbi.nmr.flow.seda.SedaFlow.doRouting(SedaFlow.java:168)
    at org.apache.servicemix.jbi.nmr.flow.seda.SedaQueue$1.run(SedaQueue.java:134)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:294)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:200)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1053)
    ... 30 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:289)
    ... 36 more
</code></pre></noscript></div>


<p>Hmmm.. this looks pretty nasty, but it&#8217;s not that bad. As one can
read <a
href="http://blogs.sun.com/gc/entry/unable_to_find_valid_certification">here</a>,
it&#8217;s associated with the other site&#8217;s having an untrusted (unsigned)
certificate. Assuming you actually trust the other end of the
communication and this situation is ok for you, you should add the
servers certificate to your keystore. The previously mentioned link
contained a little java class that would do just that. You can find it
here (original code) <a
href="http://blogs.sun.com/andreas/resource/InstallCert.java">InstallCert.java</a>
or you can look into my slightly changed version here <a
href="https://gist.github.com/951492">at github</a>.</p>

<p>You should call it as follows, assuming that file
<em>keystore.jks</em> is in the current directory:</p>

<script
src="https://gist.github.com/951459.js?file=add_untrusted_key.sh"></script>

<p>What you&#8217;ll probably see, when you execute this app is this:</p>

<div><script src='https://gist.github.com/951458.js?file=add_untrusted_cert.sh'></script>
<noscript><pre><code>mcl@correspondence:~/Desktop$ java InstallCert abc.host.pl keystore_pass
Loading KeyStore keystore.jks...
Opening connection to abc.host.pl:443...
Starting SSL handshake...

javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1623)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:198)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:192)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1074)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:128)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:529)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:465)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1120)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1147)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1131)
    at InstallCert.main(InstallCert.java:82)
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:294)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:200)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at InstallCert$SavingTrustManager.checkServerTrusted(InstallCert.java:177)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1066)
    ... 8 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:289)
    ... 14 more

Server sent 1 certificate(s):

 1 Subject CN=abc.host.pl, OU=IT, O=Tytus De z o.o., L=Lubien, ST=Wielkopolskie, C=PL
   Issuer  CN=abc.host.pl, OU=IT, O=Tytus De z o.o., L=Lubien, ST=Wielkopolskie, C=PL
   sha1    18 20 0f 4d 75 05 4b 38 61 fc 62 ba 03 0d 28 8c 50 8f e4 bd 
   md5     19 cc d0 aa 6d 25 4f 05 d7 c8 40 0c 14 7b 90 a2 

Enter certificate to add to trusted keystore or 'q' to quit: [1]
1

[
[
  Version: V3
  Subject: CN=abc.host.pl, OU=IT, O=Tytus De z o.o., L=Lubien, ST=Wielkopolskie, C=PL
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 1024 bits
  modulus: 132273155309282144973195320716811175193976134222571452308768552101191894740218986214811429267243902443501737048442287069471714463675362773263911735240842200098922910391008625926103368536307544892982972025285316457425020882189531886424398004920996956401109864350477607702600482953541993347423082215862581179547
  public exponent: 65537
  Validity: [From: Mon Nov 30 14:06:24 CET 2009,
               To: Thu Nov 28 14:06:24 CET 2019]
  Issuer:  CN=abc.host.pl, OU=IT, O=Tytus De z o.o., L=Lubien, ST=Wielkopolskie, C=PL
  SerialNumber: [    00]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: 40 75 D4 B0 85 D1 34 DE   09 24 3C BC 72 46 B2 E0  @u....4..$&lt;.rF..
0010: 18 15 84 DD A2 EB BA 5A   9F E3 5C F0 8F 53 60 EC  .......Z..\..S`.
0020: 2C 5D CB C1 EE C3 3A 65   CF 9B 6C E5 FC 01 DD 05  ,]....:e..l.....
0030: EA DC 66 BF FB 91 02 BC   39 77 CB 34 BC 7F 0B 23  ..f.....9w.4...#
0040: 40 C9 85 B3 2A 2A 20 AE   74 B0 C9 FB 47 5F B3 88  @...** .t...G_..
0050: E4 5E 6D 24 2F C0 43 9D   69 D5 69 4D 76 31 0A 62  .^m$/.C.i.iMv1.b
0060: 1A C1 25 FB 14 41 06 0E   9F A8 D1 75 DD B8 B2 B2  ..%..A.....u....
0070: 1D BF 90 11 69 18 9A C8   D5 AA 5D 26 6B 1C FB B0  ....i.....]&amp;k...

]</code></pre></noscript></div>


<p>Please note that there is a prompt (<em>Enter certificate to add to
trusted keystore&#8230;</em>) in which you can enter the certificate number
you wish to add to your keystore.</p>

<p>After all those steps my request got through and I could happily
query HTTPS service as long as I wanted to! Great!</p>

<h2>Possible problems</h2>

<p>In my search for this problem&#8217;s solution I&#8217;ve encountered this kind
of exception:</p>

<div><script src='https://gist.github.com/951458.js?file=keystore_key_error.java'></script>
<noscript><pre><code>java.lang.Exception: java.security.UnrecoverableKeyException: Cannot recover key
        at org.apache.servicemix.http.processors.ConsumerProcessor.process(ConsumerProcessor.java:216)
        at org.apache.servicemix.http.HttpBridgeServlet.doPost(HttpBridgeServlet.java:71)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:363)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:757)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:324)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:371)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
        at org.mortbay.jetty.nio.SelectChannelConnector$RetryContinuation.run(SelectChannelConnector.java:525)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:451)
Caused by: java.security.UnrecoverableKeyException: Cannot recover key
        at sun.security.provider.KeyProtector.recover(KeyProtector.java:311)
        at sun.security.provider.JavaKeyStore.engineGetKey(JavaKeyStore.java:121)
        at sun.security.provider.JavaKeyStore$JKS.engineGetKey(JavaKeyStore.java:38)
        at java.security.KeyStore.getKey(KeyStore.java:763)
        at com.sun.net.ssl.internal.ssl.SunX509KeyManagerImpl.&lt;init&gt;(SunX509KeyManagerImpl.java:113)
        at com.sun.net.ssl.internal.ssl.KeyManagerFactoryImpl$SunX509.engineInit(KeyManagerFactoryImpl.java:48)
        at javax.net.ssl.KeyManagerFactory.init(KeyManagerFactory.java:239)
        at org.apache.servicemix.http.processors.CommonsHttpSSLSocketFactory.createUnmanagedFactory(CommonsHttpSSLSocketFactory.java:117)
        at org.apache.servicemix.http.processors.CommonsHttpSSLSocketFactory.&lt;init&gt;(CommonsHttpSSLSocketFactory.java:50)
        at org.apache.servicemix.http.processors.ProviderProcessor.getHostConfiguration(ProviderProcessor.java:276)
        at org.apache.servicemix.http.processors.ProviderProcessor.process(ProviderProcessor.java:167)
        at org.apache.servicemix.soap.SoapEndpoint.process(SoapEndpoint.java:368)
        at org.apache.servicemix.common.AsyncBaseLifeCycle.doProcess(AsyncBaseLifeCycle.java:600)
        at org.apache.servicemix.common.AsyncBaseLifeCycle.processExchange(AsyncBaseLifeCycle.java:554)
        at org.apache.servicemix.common.AsyncBaseLifeCycle.onMessageExchange(AsyncBaseLifeCycle.java:510)
        at org.apache.servicemix.common.SyncLifeCycleWrapper.onMessageExchange(SyncLifeCycleWrapper.java:60)
        at org.apache.servicemix.jbi.messaging.DeliveryChannelImpl.processInBound(DeliveryChannelImpl.java:620)
        at org.apache.servicemix.jbi.nmr.flow.AbstractFlow.doRouting(AbstractFlow.java:172)
        at org.apache.servicemix.jbi.nmr.flow.seda.SedaFlow.doRouting(SedaFlow.java:168)
        at org.apache.servicemix.jbi.nmr.flow.seda.SedaQueue$1.run(SedaQueue.java:134)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:619)
</code></pre></noscript></div>


<p>A little googling led me to this <a
href="http://stackoverflow.com">StackOverflow</a> <a
href="http://stackoverflow.com/questions/4926290/java-keystore-and-password-settings">question</a>.</p>

<p>It seems that you cannot have multiple keys with different passwords
in the same keystore and use <a
href="http://download.oracle.com/javase/6/docs/api/javax/net/ssl/KeyManagerFactory.html">KeyManagerFactory</a> class. Oh
well&#8230;</p>.

<h2>Ending</h2>

<p>To sum up, the solution given works, but in my opinion using the
<em>InstallCert.java</em> app is rather dirty. I&#8217;ve been wondering, do
you know other ways of doing that thing?</p>

</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/04/01/advisory-messages-to-the-rescue/">Advisory Messages to the Rescue</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-04-01T11:16:59+02:00" pubdate data-updated="true">Apr 1<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>
The most crucial part of software development is testing. It should
ensure us, that our code is correct, works according to given specs,
etc. There are many kinds of tests: unit tests, integration, functional.
In general you should try to test the smallest possible subset of your
code and be able to check the state of the objects after the test.
</p><p>
This seems as rather easy task, but what if you have an integration
end-to-end test to perform? In most cases asserting state in integration
test is rather hard due to multiple systems interoperability. Let&#8217;s
focus on a specific situation.
</p>
<EXCERPT>
<p>
What I needed to do the other day was write some integration test for
Jms based system. The processing pipeline is easy:
<ul>
<li> fetch object from DB</li>
<li> process it</li>
<li> publish on JMS</li>
</ul>
</p><p>
some other system (X-system) polls JMS:
<ul>
<li> if message is found</li>
<li> fetch it (message disappears from the JMS queue)</li>
<li> do sth with it</li>
</p><p>
Looks simple but since I didn&#8217;t have any sane access to the X-system I
wanted to be sure that my object was actually put into the queue. It was
not acceptable to subscribe to the queue and fetch that object in my
test - it would dusrupt the flow of the whole process.
</p><p>
Fortunately I&#8217;ve been using <a
href="http://activemq.apache.org">ActiveMQ</a> and since it offers a
thing called <a
href="http://activemq.apache.org/advisory-message.html">Advisory
Messages</a> I&#8217;ve decided to use just them.
</p><p>
What are advisory messages? They are a set of administrative messages
that are generated on a specific event, like message consumption,
message delivery, topic destruction, and many more. Each type of message
is delivered to a separate topic - prefixed with 
<strong>ActiveMQ.Advisory</strong>. Since generation of such messages
may be an overhead in production systems these features are turned off
by default. You need to enable specific type of
advisory message for a specific jms destination. You can do this with
ths configuration change to <strong>activemq.xml</strong>
</p>
<div><script src='https://gist.github.com/897141.js?file='></script>
<noscript><pre><code>        &lt;destinationPolicy&gt;
            &lt;policyMap&gt;
              &lt;policyEntries&gt;
                &lt;policyEntry queue=&quot;my/test/queue&quot; advisoryForDelivery=&quot;true&quot; advisoryForConsumed=&quot;true&quot;/&gt;                                                   
                &lt;policyEntry topic=&quot;&gt;&quot; producerFlowControl=&quot;true&quot; memoryLimit=&quot;1mb&quot;&gt;
                  &lt;pendingSubscriberPolicy&gt;
                    &lt;vmCursor /&gt;
                  &lt;/pendingSubscriberPolicy&gt;
                &lt;/policyEntry&gt;
              &lt;/policyEntries&gt;
            &lt;/policyMap&gt;
        &lt;/destinationPolicy&gt;
</code></pre></noscript></div>

<p>
As you can see, I&#8217;ve specified which advisories I want enabled. The full
list of available advisories can be found <a
href="http://activemq.apache.org/advisory-message.html">here</a>.
</p><p>
Since I wanted to read messages from that topic I&#8217;ve added the following
configuration to my spring context - there is one destination bean for
inserting messages and one bean for advisory topic.
</p>
<div><script src='https://gist.github.com/897150.js?file='></script>
<noscript><pre><code>    &lt;bean id=&quot;testQueue&quot; class=&quot;org.apache.activemq.command.ActiveMQQueue&quot; autowire=&quot;constructor&quot;&gt;
        &lt;constructor-arg value=&quot;my/test/queue&quot; /&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;deliveredToTestQueueAdvisory&quot; class=&quot;org.apache.activemq.command.ActiveMQTopic&quot; autowire=&quot;constructor&quot;&gt;
        &lt;constructor-arg value=&quot;ActiveMQ.Advisory.MessageDelivered.Queue.my/test/queue&quot; /&gt;
    &lt;/bean&gt;
</code></pre></noscript></div>

<p>
Thanks to this configuration I&#8217;ve been able to check that my message was
actually delivered to the queue. There&#8217;ve been no need to worry about
race conditions in consuming the message from original queue - if the
X-system read the message, I&#8217;d be unable to determine if it has ever
been in JMS at all.
</p><p>
What&#8217;s not so nice about that:
<ul>
<li> advisory messages can be thought of as counters rather than debugging
  information</li>
<li> they don&#8217;t contain any data that would allow us to match advisory
  message to the original message - thou you could correlate by
  timestamp</li>
</ul>
</p>
<p>
All in all, it&#8217;s a good tool to have! But perhaps you have some other
thoughts on this subject? How do you test JMS?
</p></div>
<h2>Comments</h2>
<div class='comments'>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/03/27/how-to-run-multiple-guest-os-in-qemu/">How to Run Multiple Guest OS in QEMU?</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-03-27T20:47:11+02:00" pubdate data-updated="true">Mar 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
This weekend I&#8217;ve been fiddling with <a href="http://www.qemu.org">QEMU</a>. I&#8217;ve installed <a href="http://openbsd.org">OpenBSD</a> on a single image and wanted to have two instances of it communicating via network. Installing the system was easy, but the networking setup was quite a pain. See how I did that&#8230;
<EXCERPT>

<p>To make QEMU instances communicate with each other I needed to plug them to a &#8220;network&#8221;. That&#8217;s why I&#8217;ve created a bridge to which Virtual Instances would connect to. I&#8217;ve used the following script:</p>

<div><script src='https://gist.github.com/889357.js?file='></script>
<noscript><pre><code>#!/bin/bash                                                                                                                                                 
# 1st, release all DHCP address and remove all IP address associated
# with the original eth0
#/sbin/dhcpcd -k
kill `pidof dhclient`
/sbin/ip addr flush eth0
# then take the interface down so we can rename it
/sbin/ip link set eth0 down
# now rename the original eth0 to reth0 (Real ETH0)
nameif reth0 00:24:81:43:61:5b
# OK, bring the same interface (with new name though) back up
/sbin/ip link set reth0 up
# 2nd let's create a bridge called eth0 so other programs think they are
# talking to the same old interface (actually they will talk to the
# bridge which is a clone of the original eth0 - with name MAC addr)
/usr/sbin/brctl addbr eth0
# then add both origianl eth0 and tap1 device to the bridge
/sbin/brctl addif eth0 tap1
/usr/sbin/brctl addif eth0 reth0
echo &quot;showing bridge mac addresses&quot;
/usr/sbin/brctl showmacs eth0
# 3rd, we need to bring the newly created bridge UP
/sbin/ip link set eth0 up
# 4th, renew the DHCP address if possible
#/sbin/dhcpcd -n
dhclient eth0
/sbin/ip addr show
</code></pre></noscript></div>


<p>Then I just needed to start Qemu with this command line:</p>

<div><script src='https://gist.github.com/889359.js?file='></script>
<noscript><pre><code>sudo qemu openbsd-4.7.img  -net tap -net nic,macaddr=52:54:00:12:34:57,model=ne2k_pci</code></pre></noscript></div>
 

<p>Since I&#8217;ve set up bridge for Qemu instances, I&#8217;ve plugged <a href="http://en.wikipedia.org/wiki/TUN/TAP">TAP</a> interfaces into it. That&#8217;s why I&#8217;ve needed to specify this in my qemu exec line. I&#8217;ve also added macaddress setting since both my instances were getting the same one.</p>

<p>And that&#8217;s all! It works like a charm. Now on to some harder things!</p></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/03/20/me-on-hadoop-on-parleys/">Me on Hadoop on Parleys</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-03-20T20:35:39+01:00" pubdate data-updated="true">Mar 20<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>Finally I&#8217;ve managed to import my <a href="http://mcl.jogger.pl/2011/02/17/hadoop-on-warsaw-jug/">WarJUG presentation</a> to parleys.com. See for yourself :)
</p>
<EXCERPT>

<object width="474" height="443">
  <param name="movie" value="http://www.parleys.com/share/parleysshare2.swf?pageId=2316"/>
  <param name="allowFullScreen" value="true"/>
  <param name="pageId" value="2316"/>
  <embed src="http://www.parleys.com/share/parleysshare2.swf?pageId=2316" type="application/x-shockwave-flash" allowfullscreen="true" width="474" height="443"/>
</object>

<p>
If you&#8217;ve got problems with opening the parleys&#8217; version try the ones uploaded to youtube.
</p>
<p>
Here is part 1:
</p>
<object width="425" height="344"><param name="movie"                            
value="http://www.youtube.com/v/oUFUhZtsUFI?hl=en&fs=1"></param><param
name="allowFullScreen" value="true"></param><param
name="allowscriptaccess" value="always"></param><embed
src="http://www.youtube.com/v/oUFUhZtsUFI?hl=en&fs=1"
type="application/x-shockwave-flash" allowscriptaccess="always"
allowfullscreen="true" width="425" height="344"></embed></object>

<p>And here is part 2:</p>

<object width="425" height="344"><param name="movie"
value="http://www.youtube.com/v/LqhmOHXaQEU?hl=en&fs=1"></param><param
name="allowFullScreen" value="true"></param><param
name="allowscriptaccess" value="always"></param><embed
src="http://www.youtube.com/v/LqhmOHXaQEU?hl=en&fs=1"
type="application/x-shockwave-flash" allowscriptaccess="always"
allowfullscreen="true" width="425" height="344"></embed></object>

</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'><a href="http://sigvatr.jogger.pl">Sigvatr</a></div>
<div class='content'>
<p>I&#8217;m sorry, but I don&#8217;t understand  Polish :P</p></div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/02/23/after-warjug/">After WarJUG</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-02-23T14:22:04+01:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>Some time ago I&#8217;d written about my <a href="http://mcl.jogger.pl/2011/02/17/hadoop-on-warsaw-jug/">arsaw JUG presentation</a>. I finally presented the the topic yesterday.</p>

<p>I must say I&#8217;m fairly content with my yesterday&#8217;s presentation :) Here are some slides and as soon as the video will be available I&#8217;ll post it here too.</p>

<div style="width:425px" id="__ss_7026758"><strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/zygm0nt/hadoop-i-okolice" title="Hadoop i okolice">Hadoop i okolice</a></strong><object id="__sse7026758" width="425" height="355"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=touktemplate-110223021208-phpapp02&stripped_title=hadoop-i-okolice&userName=zygm0nt" /><param name="allowFullScreen" value="true"/><param name="allowScriptAccess" value="always"/><embed name="__sse7026758" src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=touktemplate-110223021208-phpapp02&stripped_title=hadoop-i-okolice&userName=zygm0nt" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="355"></embed></object><div style="padding:5px 0 12px">View more <a href="http://www.slideshare.net/">presentations</a> from <a href="http://www.slideshare.net/zygm0nt">zygm0nt</a>.</div></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'><a href="http://sigvatr.jogger.pl">Sigvatr</a></div>
<div class='content'>
<p>Czyli napisałeś ładny post po angielsku, tylko po to, by zaprosić do obejrzenia prezentacji po polsku?<br />
<br />
(przepraszam, ale mój angielski jest za słaby na pisanie w nim)</p></div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/02/18/hadoop-on-warsaw-jug/">Hadoop at Warsaw JUG</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-02-18T00:09:46+01:00" pubdate data-updated="true">Feb 18<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>I&#8217;ll be speaking at the upcoming JUG meeting in Warsaw. The topic will be Apache Hadoop. If you&#8217;re interested, feel invited. Attend and ask questions. But be aware I&#8217;m not advanced in this technology :)</p>

<p>Full invitation text can be found <a href="http://sites.google.com/site/warszawajug/">here</a>.</p>

<p>P.S.: Do you know what Hadoop is? Do you use it anywhere? Have you played with it?</p></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'><a href="http://mcl.jogger.pl">Marcin</a></div>
<div class='content'>
<p>@teamon - prawdopodobnie będzie. Na 100% to nie wiem, ale teoretycznie wszystkie prezentacje WarJUGa są nagrywane<br />
<br />
@r2 - nie trzeba się zapisywać - wystarczy przyjść</p></div>
</div>
<div class='comment'>
<div class='author'><a href="">r2</a></div>
<div class='content'>
<p>Trzeba się uprzednio zapisać (gdzie?) by przyjść?</p></div>
</div>
<div class='comment'>
<div class='author'><a href="http://blog.teamon.eu">teamon</a></div>
<div class='content'>
<p>Prezentacja bedzie nagrywana?</p></div>
</div>
<div class='comment'>
<div class='author'><a href="http://mcl.jogger.pl">mcl</a></div>
<div class='content'>
<p>Prezentację starałem się przygotować bardzo ogólnie. Nie będzie zbyt dużo Javy - nie będę omawiał API. <br />
<br />
Myślę, że będzie to ciekawe również dla administratora.</p></div>
</div>
<div class='comment'>
<div class='author'><a href="">zdzichu</a></div>
<div class='content'>
<p>Czy prezentacja będzie dotyczyła tylko programistycznej strony? Czy admin nie znający javy może przyjść i dowie się czegoś ciekawego?</p></div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/02/17/deus-ex-what-a-game/">Deus Ex - What a Game!</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-02-17T01:05:50+01:00" pubdate data-updated="true">Feb 17<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<center><img
src="http://blog.innovative-labs.com/blog/deusex1.jpg"/></center>
<p>Some time ago I&#8217;d become obsessed with one game. It kept me up late,
fed my imagination, sucked all my free time - so basically did what good
game should. It was not a new production, quite the contrary -it&#8217;s
release date was year 2000. And the game itself was Deus Ex.</p>

<EXCERPT>

<p>The year is 2050 and you wake up as a rookie named JC Denton - you are
an UNATCO (United Nations Anti Terrorism CoOperation) special agent. In
the beginning your orders are clear and you&#8217;re there to fight the
terrorists. The first mission takes place in the depths of The Statue of
Liberty, and it gets better further into the game. The plot wanders,
there seem to be many foreign forces entangled, and it may become clear
to you, that actually you&#8217;re being used as a tool - a blunt one.
Gradually the plot unfolds and you become aware of the whole conspiracy
theory thing. You interact with Majestic 12 and Illuminati secret
organizations and become part of a global terrorist warfare.</p>

<p>As for a game released so many years ago, even before 11 September
2001 - and the terrorist&#8217;s attacks on WTC - the game is astonishingly
predictive. It envisions cyberwarfare, the rise of China&#8217;s economic
importance, threads of terrorism and the whole range of technological
topics. Well, mainly some sci-fi visions that became reality the
following years since game&#8217;s release ;-)</p>

<p>Deus Ex has extremely well thought world. Everything is well laid
out and there are no major glitches. It also offers multiple solutions
to almost each puzzle - you can fight your way through, but you can try
to bribe, steal, sneak and stunt. And the engine supports these actions
perfectly (I&#8217;ve tried sneaking when playing <a
href="http://fallout.bethsoft.com/eng/home/home.php">Fallout: New
Vegas</a> but failed miserably). The myriad of solutions are for you to
choose from. It would be even better if you could influence the plot in
even greater, more substantial degree - but perhaps it would be too much
to ask for.</p>

<center><img
src="http://blog.innovative-labs.com/blog/245607-deus_ex__3__super.jpg"/></center>

<p>Of course the game has also some weak sides. Because it&#8217;s a little
bit dated the graphics are not up to today&#8217;s standards. The other thing
is that the world seems not too densely populated - but as a matter of
fact it may be because of 2000&#8217;s hardware limitations.</p>

<p>I got the game from Deus Ex Trilogy Pack (3 games in it, just for
20 PLN). The pack contains also other parts called: <a
href="http://en.wikipedia.org/wiki/Deus_Ex:_Invisible_War">Deus Ex: Invisible
War</a> and <a
href="http://en.wikipedia.org/wiki/Project_Snowblind">Project
Snowblind</a>. Invisible War is still an RPG, but Project Snowblind is
just a regular FPS - really daunting. I&#8217;ve played the original Deus Ex
on Linux with Wine - it worked very well and I haven&#8217;t experience any
problems. I&#8217;ve tried the same approach with Invisible War, but it seems
sooooo buugy that I turned it off after just an hour. Perhaps will try
to run it under Windows some other time - first to see if the bugs are
gone :)</p>

<center><img
src="http://blog.innovative-labs.com/blog/deus_ex_human_revolution.png"/></center>
<p>Oh, and there is also a third part coming, which will be a prequel to
the first game. It will be called <a href="http://www.deusex.com/">Deus Ex: Human
Revolution</a>. Go see some trailers and gameplays on You-tube. It seems
well worth the time and money it will cost.</p>

<p><b>UPDATED:</b> some links from comments below:</p>

<ul>
<li><a href="http://www.offtopicproductions.com/hdtp">http://www.offtopicproductions.com/hdtp</a> - near-perfect textures for Deus Ex. If you&#8217;re going to start playing this game consider this patch!</li>
<li>&#8230;</li>
</ul></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'><a href="http://mcl.jogger.pl">mcl</a></div>
<div class='content'>
<p>@chester - a to niezłe, wygląda super. Szkoda że dopiero teraz się o tym dowiedziałem. Przecież nie będę grał jeszcze raz tylko dla tekstur<br />
<br />
@Zal -  Of course! This is a great phenomenon. A pleasent one.</p></div>
</div>
<div class='comment'>
<div class='author'><a href="http://weblog.herok.pl">chester</a></div>
<div class='content'>
<p>A ja dodam tyle: http://www.offtopicproductions.com/hdtp/ :)<br />
acz nie próbowałem tego</p></div>
</div>
<div class='comment'>
<div class='author'><a href="">maliniak</a></div>
<div class='content'>
<p>aż chyba spróbuję :) pozdro</p></div>
</div>
<div class='comment'>
<div class='author'><a href="http://blog.4zal.net">Zal</a></div>
<div class='content'>
<p>In my opinion first Deus Ex is much better than the next part. I can&#8217;t wait for Deus Ex: Human Revolution and I hope that it won&#8217;t disappoint us, Deus Ex lovers :D<br />
<br />
Do you know that every time somebody mention Deus Ex, someone will reinstall it? ;]</p></div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/01/17/jms-redelivery-with-activemq-and-servicemix/">JMS Redelivery With ActiveMQ and Servicemix</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-01-17T09:56:29+01:00" pubdate data-updated="true">Jan 17<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<p>
The other day I felt a compelling need to implement a JMS redelivery
scenario. The exact scenario I&#8217;d been trying to handle was:
</p>

<ol>
<li>my message is in an ActiveMQ queue or topic</li>
<li>its processing fails, because of some exception - ie. database
access exception due to server nonavailability</li>
<li>since we get an exception, the message is not handled properly, we
may want to retry processing attempt some time later</li>
<li>of course, for the redelivery to happen we need the message to stay
in the ActiveMQ queue - fetching messages from the queue will be stopped
until the redelivery succeeds or expires</li>
</ol>

See how this can be done after the jump :)

<EXCERPT/>

<p>
For this to happen, I&#8217;ve tried implementing Apache Camel route, but as
it turns out, Camel fails to deliver facilities for exact JMS
redelivery. It is possible to set JMS connection in <i>transacted</i>
mode, but the redeliveries happen one after another and fixed times.
</p>

<p>
What I&#8217;ve ended up doing was implement a servicemix-jms endpoint. I&#8217;ve
used this configuration for it:
</p>
<pre class="brush: xml">
<jms:endpoint service="ts:WorkflowConsumerService"
                  endpoint="default"
                  targetService="ts:WorkflowConsumerCamelService"
                  targetEndpoint="default"
                  role="consumer"
                  processorName="jca"
                  connectionFactory="#connectionFactory"
                  resourceAdapter="#ra"
                  activationSpec="#activationSpec"
                  bootstrapContext="#bootstrapContext"
                  synchronous="true"
                  rollbackOnError="true"
                  wsdlResource="classpath:LeadManagement.wsdl"
                  defaultMep="http://www.w3.org/2004/08/wsdl/in-only"/>

    <bean name="connectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName">
            <value>activemq/connectionFactory</value>
        </property>
    </bean>

    <bean name="ra" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName">
            <value>activemq/resourceAdapter</value>
        </property>
    </bean>

    <bean id="activationSpec" class="org.apache.activemq.ra.ActiveMQActivationSpec">
        <property name="destination" value="example/C"/>
        <property name="destinationType" value="javax.jms.Queue"/>
        <property name="maximumRedeliveries" value="10"/>
        <property name="initialRedeliveryDelay" value="10000"/>
    </bean>

    <jee:jndi-lookup id="bootstrapContext" jndi-name="java:comp/env/smx/BootstrapContext">
    </jee:jndi-lookup>
</pre>
<p>
As you can see, we lookup a couple of things in JNDI registry, so you need to 
have them configured on the Servicemix side - a sample config presented 
farther in this entry. 
</p><p>
The bean responsible for configuring redelivery settings is <b>activationSpec</b>.
You can set various things with it, like:
</p>
<ul>
<li>initial redelivery delay</li>
<li>maximum number of redeliveries</li>
<li>backoff multiplier</li>
<li>&#8230;</li>
</ul>
<p>
What is really important in <i>jms:endpoint</i> config for this to work are:</p>
<ul>
<li><i>processorName=&#8221;jca&#8221;</i></li>
<li><i>rollbackOnError=&#8221;true&#8221;</i></li>
</ul>
<p>
Servicemix should have the following entries in its jndi registry:
</p>
<pre class="brush: xml">
         <entry key="activemq/resourceAdapter" value-ref="activemqRA" />

         <entry key="activemq/connectionFactory" value-ref="activemqCF" />

(...) 
<!-- namespaces:-->
       xmlns:jencks="http://jencks.org/2.0"
       xmlns:amqra="http://activemq.apache.org/schema/ra" -->

          <amqra:resourceAdapter
                  id="activemqRA"
                  serverUrl="${activemq.url}" />
          <amqra:managedConnectionFactory
                  id="activemqMCF"
                  resourceAdapter="#activemqRA" />
          <jencks:connectionFactory
                  id="activemqCF"
                  managedConnectionFactory="#activemqMCF"
                  connectionManager="#connectionManager" />
</pre>

<p>
When the redeliveries are exhausted, message is routed to global Dead Letter Queue
called ActiveMQ.DLQ. Since this is a single bag for all the failed messages
from all queues, you may want to configure this aspect differently. For example
you can tell ActiveMQ to create a single DLQ for each queue. Use this config 
to achieve it - the changes should be made to Broker configuration.
</p>
<pre class="brush: xml">
<broker...>
  <destinationPolicy>
    <policyMap>
      <policyEntries>
        <!-- Set the following policy on all queues using the '>' wildcard -->
        <policyEntry queue=">">
          <deadLetterStrategy>
            <!--
              Use the prefix 'DLQ.' for the destination name, and make
              the DLQ a queue rather than a topic
            -->
            <individualDeadLetterStrategy
              queuePrefix="DLQ." useQueueForQueueMessages="true" />
          </deadLetterStrategy>
        </policyEntry>
      </policyEntries>
    </policyMap>
  </destinationPolicy>
  ...
</broker>
</pre>
<p>
More on the subject of redelivieries in ActiveMQ can be found at <a href="http://activemq.apache.org/message-redelivery-and-dlq-handling.html">http://activemq.apache.org/message-redelivery-and-dlq-handling.html</a>.
</p></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/11/30/after-whug/">After WHUG meeting</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/26/whug-8-beyond-hadoop/">WHUG 8. Beyond Hadoop - checking other options</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/30/hadoop-ha/">Hadoop HA setup</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/18/raspberry-pi/">raspberry-pi</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/18/hadoop-for-enterprises/">Hadoop for Enterprises</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/zygm0nt">@zygm0nt</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'zygm0nt',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("zygm0nt", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/zygm0nt" class="twitter-follow-button" data-show-count="false">Follow @zygm0nt</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Marcin Cylke -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'marcinbloguje';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
